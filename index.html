<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WilsonPlus - Building Materials & Paints Inventory</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="Offline business inventory management application">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-paint-brush"></i> WilsonPlus</h1>
                <div class="header-actions">
                    <button id="syncBtn" class="btn btn-secondary" title="Sync Data">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button id="exportBtn" class="btn btn-secondary" title="Export Data">
                        <i class="fas fa-download"></i>
                    </button>
                    <button id="importBtn" class="btn btn-secondary" title="Import Data">
                        <i class="fas fa-upload"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <button class="nav-btn active" data-tab="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </button>
            <button class="nav-btn" data-tab="inventory">
                <i class="fas fa-paint-brush"></i>
                <span>Materials</span>
            </button>
            <button class="nav-btn" data-tab="sales">
                <i class="fas fa-shopping-cart"></i>
                <span>Sales</span>
            </button>
            <button class="nav-btn" data-tab="alerts">
                <i class="fas fa-bell"></i>
                <span>Alerts</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalItems">0</h3>
                            <p>Total Items</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="lowStockItems">0</h3>
                            <p>Low Stock</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalValue">UGX 0</h3>
                            <p>Total Value</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="todaySales">UGX 0</h3>
                            <p>Today's Sales</p>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-sections">
                    <div class="section">
                        <h2>Recent Sales</h2>
                        <div id="recentSales" class="recent-list">
                            <!-- Recent sales will be populated here -->
                        </div>
                    </div>
                    <div class="section">
                        <h2>Low Stock Alerts</h2>
                        <div id="lowStockAlerts" class="alert-list">
                            <!-- Low stock alerts will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory Tab -->
            <div id="inventory" class="tab-content">
                <div class="tab-header">
                    <h2>Building Materials & Paints</h2>
                    <button id="addItemBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> New Invoice
                    </button>
                </div>
                
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="Search items...">
                    <button id="searchBtn" class="btn btn-secondary">
                        <i class="fas fa-search"></i>
                    </button>
                </div>

                <div class="inventory-table-container">
                    <table class="inventory-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>SKU</th>
                                <th>Category</th>
                                <th>Brand</th>
                                <th>Size/Unit</th>
                                <th>Stock</th>
                                <th>Min Stock</th>
                                <th>Price</th>
                                <th>Location</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTableBody">
                            <!-- Inventory items will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Sales Tab -->
            <div id="sales" class="tab-content">
                <div class="tab-header">
                    <h2>Sales Management</h2>
                    <button id="newSaleBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> New Sale
                    </button>
                </div>

                <div class="sales-filters">
                    <input type="date" id="dateFrom" class="filter-input">
                    <input type="date" id="dateTo" class="filter-input">
                    <button id="filterSalesBtn" class="btn btn-secondary">Filter</button>
                </div>

                <div class="sales-table-container">
                    <table class="sales-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Items</th>
                                <th>Quantity</th>
                                <th>Total</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="salesTableBody">
                            <!-- Sales records will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Alerts Tab -->
            <div id="alerts" class="tab-content">
                <div class="tab-header">
                    <h2>Stock Alerts</h2>
                    <button id="markAllReadBtn" class="btn btn-secondary">
                        <i class="fas fa-check"></i> Mark All Read
                    </button>
                </div>

                <div id="alertsList" class="alerts-container">
                    <!-- Alerts will be populated here -->
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="itemModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="itemModalTitle">New Invoice</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="invoiceForm">
                <!-- Invoice Header -->
                <div class="invoice-header">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="invoiceNumber">Invoice Number *</label>
                            <input type="text" id="invoiceNumber" required>
                        </div>
                        <div class="form-group">
                            <label for="invoiceDate">Date *</label>
                            <input type="date" id="invoiceDate" required>
                        </div>
                    </div>
                </div>

                <!-- Add Item Section -->
                <div class="add-item-section">
                    <h4>Add Item to Invoice</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemName">Item Name *</label>
                            <input type="text" id="itemName" placeholder="e.g., Exterior Paint White, 2x4 Lumber" required>
                        </div>
                        <div class="form-group">
                            <label for="itemQuantity">Quantity *</label>
                            <input type="number" id="itemQuantity" min="1" step="0.1" placeholder="1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="itemUnitPrice">Unit Price *</label>
                            <input type="number" id="itemUnitPrice" min="0" step="1" placeholder="0" required>
                        </div>
                        <div class="form-group">
                            <label for="itemTotal">Item Total</label>
                            <input type="number" id="itemTotal" readonly placeholder="0">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button type="button" id="addItemToInvoice" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add to Invoice
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Invoice Items List -->
                <div class="invoice-items-section">
                    <h4>Invoice Items</h4>
                    <div id="invoiceItemsList" class="invoice-items-list">
                        <p class="no-items">No items added yet</p>
                    </div>
                    <div class="invoice-totals">
                        <div class="total-row">
                            <span class="total-label">Subtotal:</span>
                            <span id="invoiceSubtotal" class="total-amount">UGX 0</span>
                        </div>
                        <div class="total-row">
                            <span class="total-label">Tax (0%):</span>
                            <span id="invoiceTax" class="total-amount">UGX 0</span>
                        </div>
                        <div class="total-row grand-total">
                            <span class="total-label">Total:</span>
                            <span id="invoiceGrandTotal" class="total-amount">UGX 0</span>
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-close">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveInvoiceBtn" disabled>
                        <i class="fas fa-save"></i> Save Invoice
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="saleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Sale</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="saleForm">
                <div class="form-group">
                    <label for="saleItem">Select Item *</label>
                    <select id="saleItem" required>
                        <option value="">Choose an item...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="saleQuantity">Quantity *</label>
                    <input type="number" id="saleQuantity" min="1" required>
                </div>
                <div class="form-group">
                    <label for="salePrice">Unit Price</label>
                    <input type="number" id="salePrice" min="0" step="1" readonly>
                </div>
                <div class="form-group">
                    <label for="saleTotal">Total</label>
                    <input type="number" id="saleTotal" readonly>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-close">Cancel</button>
                    <button type="submit" class="btn btn-primary">Complete Sale</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="toast">
        <span id="toastMessage"></span>
        <button id="toastClose">&times;</button>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
    <script src="database.js"></script>
    <script src="app.js"></script>
</body>
</html>
